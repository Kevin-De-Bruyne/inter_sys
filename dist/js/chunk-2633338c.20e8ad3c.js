(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2633338c"],{"1c1d":function(t,e,i){"use strict";i("df9f")},"71c2":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("span",{staticClass:"iconfont icon-fanhui",on:{click:t.back}}),i("span",{staticClass:"iconfont iconfont icon-shouye",on:{click:t.home}}),i("span",{staticClass:"title"},[t._v(t._s(t.title))])])},a=[],s={data:function(){return{data:["zhangsan","lisi","wanwu","zhaoliu","tianqi","xiaoba"],user:{firstName:"张",lastName:"三"}}},props:{title:{type:String,default:""}},methods:{back:function(){this.$router.go(-1),this.$bus.$emit("alen",555)},home:function(){this.$router.push("/")}}},o=s,r=(i("b9a2"),i("2877")),l=Object(r["a"])(o,n,a,!1,null,"3d7d63d2",null);e["a"]=l.exports},7588:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yuyue"},[i("Header",{attrs:{title:t.title}}),i("div",{staticClass:"apply_box"},[i("div",{staticClass:"apply_title"},[i("span",{on:{click:function(e){return t.$router.push("/appointmented")}}},[t._v("时间地点")])]),i("router-view"),i("div",{staticClass:"content"},[i("div",{staticClass:"content_list"},[t._m(0),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.interview_unit,expression:"interview_unit",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入拜访单位"},domProps:{value:t.interview_unit},on:{click:t.search,input:function(e){e.target.composing||(t.interview_unit=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.popup?i("div",{staticClass:"popList"},t._l(t.dataList,(function(e,n){return i("div",{key:n,staticClass:"list",on:{click:function(i){return t.listClick(n,e)}}},[i("span",{style:{color:t.listIndex==n?"rgb(5,129,253)":""}},[t._v(t._s(e.name))]),t.listIndex==n?i("span",{staticClass:"iconfont icon-arrow-right",staticStyle:{color:"rgb(5,129,253)"}}):t._e()])})),0):t._e(),i("div",{staticClass:"content_list"},[t._m(1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.interview_floor,expression:"interview_floor"}],attrs:{type:"text",placeholder:"请输入楼层"},domProps:{value:t.interview_floor},on:{input:function(e){e.target.composing||(t.interview_floor=e.target.value)}}})]),i("div",{staticClass:"content_list"},[t._m(2),i("input",{directives:[{name:"model",rawName:"v-model",value:t.interview_office,expression:"interview_office"}],attrs:{type:"text",placeholder:"请输入办公室"},domProps:{value:t.interview_office},on:{input:function(e){e.target.composing||(t.interview_office=e.target.value)}}})]),i("div",{staticClass:"apply_box"},[i("div",{staticClass:"content_list",on:{click:function(e){t.show=!0}}},[t._m(3),""==t.formDate?i("div",{staticClass:"time"},[t._v("请选择拜访时间")]):i("div",{staticClass:"time"},[t._v(t._s(t.formDate))])]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("van-datetime-picker",{attrs:{type:"datetime",title:"选择拜访时间","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirm},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1)])],1),i("div",{staticClass:"apply_box"},[t._m(4),i("div",{staticClass:"content"},[i("div",{staticClass:"content_list"},[t._m(5),i("input",{directives:[{name:"model",rawName:"v-model",value:t.interview_realname,expression:"interview_realname"}],attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.interview_realname},on:{input:function(e){e.target.composing||(t.interview_realname=e.target.value)}}})]),i("div",{staticClass:"content_list"},[t._m(6),i("input",{directives:[{name:"model",rawName:"v-model",value:t.interview_mobile,expression:"interview_mobile"}],attrs:{type:"text",placeholder:"请输入电话"},domProps:{value:t.interview_mobile},on:{input:function(e){e.target.composing||(t.interview_mobile=e.target.value)}}})]),i("div",{staticClass:"content_list"},[t._m(7),i("input",{directives:[{name:"model",rawName:"v-model",value:t.department,expression:"department"}],attrs:{type:"text",placeholder:"请输入单位部门"},domProps:{value:t.department},on:{input:function(e){e.target.composing||(t.department=e.target.value)}}})])])]),i("div",{staticClass:"apply_box"},[t._m(8),i("div",{staticClass:"content"},[i("div",{staticClass:"content_list"},[t._m(9),i("input",{directives:[{name:"model",rawName:"v-model",value:t.realname,expression:"realname"}],attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.realname},on:{input:function(e){e.target.composing||(t.realname=e.target.value)}}})]),i("div",{staticClass:"content_list"},[t._m(10),i("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"text",placeholder:"请输入电话"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),1==t.$route.query.type?i("div",{staticClass:"content_list"},[t._m(11),i("input",{directives:[{name:"model",rawName:"v-model",value:t.id_card,expression:"id_card"}],attrs:{type:"text",placeholder:"请输入身份证"},domProps:{value:t.id_card},on:{input:function(e){e.target.composing||(t.id_card=e.target.value)}}})]):t._e(),i("div",{staticClass:"content_list"},[t._m(12),i("input",{directives:[{name:"model",rawName:"v-model",value:t.unit,expression:"unit"}],attrs:{type:"text",placeholder:"请输入单位"},domProps:{value:t.unit},on:{input:function(e){e.target.composing||(t.unit=e.target.value)}}})]),1==t.$route.query.type?i("div",{staticClass:"content_list"},[t._m(13),i("input",{directives:[{name:"model",rawName:"v-model",value:t.car_num,expression:"car_num"}],attrs:{type:"text",placeholder:"请输入车牌号，例如粤AXXXXXX"},domProps:{value:t.car_num},on:{input:function(e){e.target.composing||(t.car_num=e.target.value)}}})]):t._e(),i("div",{staticClass:"content_list"},[t._m(14),i("input",{directives:[{name:"model",rawName:"v-model",value:t.together,expression:"together"}],staticStyle:{width:"50%"},attrs:{type:"text",placeholder:"请输入人数，例如3"},domProps:{value:t.together},on:{input:function(e){e.target.composing||(t.together=e.target.value)}}}),t._v("人 ")])])]),i("div",{staticClass:"apply_box"},[t._m(15),i("div",{staticClass:"contents"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reason,expression:"reason"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入拜访理由"},domProps:{value:t.reason},on:{input:function(e){e.target.composing||(t.reason=e.target.value)}}})])]),1==t.$route.query.type?i("div",{staticClass:"apply_box"},[t._m(16),i("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":1},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1):t._e(),1==t.$route.query.type?i("div",{staticClass:"apply_box"},[t._m(17),i("van-uploader",{attrs:{"after-read":t.afterRead2,"max-count":1},model:{value:t.fileList2,callback:function(e){t.fileList2=e},expression:"fileList2"}})],1):t._e(),i("div",{staticClass:"submit"},[i("div",{staticClass:"btn",on:{click:t.submit}},[t._v("提交")])])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("拜访单位")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("楼层")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("办公室")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("时间")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply_title"},[i("span",[t._v("被访人")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("姓名")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("电话")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("单位部门")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply_title"},[i("span",[t._v("拜访人")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("姓名")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("电话")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("身份证")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("单位")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("车牌号")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content_name"},[i("span",[t._v("随行人数")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply_title"},[i("span",[t._v("拜访理由")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply_title"},[i("span",[t._v("穗康码")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"apply_title"},[i("span",[t._v("行程大数据截图")])])}],s=(i("ac1f"),i("841c"),i("b0c0"),i("bc3a"),i("71c2")),o=function(){var t=0;return function(e,i){clearTimeout(t),t=setTimeout(e,i)}}(),r={data:function(){return{fileList:[],fileList2:[],minDate:new Date,maxDate:new Date(2025,10,1),currentDate:new Date,show:!1,formDate:"",interview_unit:"",interview_floor:"",interview_office:"",interview_realname:"",interview_mobile:"",realname:"",mobile:"",id_card:"",popup:!1,unit:"",listIndex:0,car_num:"",reason:"",together:"",health_code:"",journey_code:"",department:"",title:1==this.$route.query.type?"预约申请":"访客邀请",dataList:[]}},watch:{interview_unit:function(){var t=this;o((function(){t.search()}),500)}},components:{Header:s["a"]},mounted:function(){console.log(localStorage.getItem("id")),console.log(document.documentElement.scrollTop)},methods:{listClick:function(t,e){this.listIndex=t,this.interview_unit=e.name,this.popup=!1},search:function(){var t=this;this.popup=!0,this.$get("/api/client/getcompanylist",{keyword:this.interview_unit}).then((function(e){t.listIndex=0,t.dataList=e.data}))},afterRead:function(t,e){var i=this,n=new FormData;console.log(t.file),n.append("pic",t.file),console.log(n.get("pic"));var a={"apply-secret":this.sercet,"Content-Type":"multipart/form-data"};this.$post("/api/client/upload",n,a).then((function(t){console.log(i.baseURL+t.path),i.health_code=t.path}))},afterRead2:function(t){var e=this,i=new FormData;console.log(t.file),i.append("pic",t.file),console.log(i.get("pic"));var n={"apply-secret":this.sercet,"Content-Type":"multipart/form-data"};this.$post("/api/client/upload",i,n).then((function(t){console.log(e.baseURL+t.path),e.journey_code=t.path}))},confirm:function(t){console.log(t);var e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),a=t.getHours(),s=t.getMinutes(),o=t.getSeconds();console.log(e,i,n,a,s,o);var r=e+"-"+(i<10?"0"+i:i)+"-"+(n<10?"0"+n:n)+" "+(a<10?"0"+a:a)+":"+(s<10?"0"+s:s);this.formDate=r,this.show=!1},submit:function(){var t=this,e={"apply-secret":this.sercet},i={realname:this.realname,id_card:this.id_card,together:this.together,unit:this.unit,mobile:this.mobile,reason:this.reason,apply_time:this.formDate,car_num:this.car_num,health_code:this.health_code,journey_code:this.journey_code,interview_realname:this.interview_realname,interview_mobile:this.interview_mobile,interview_unit:this.interview_unit,interview_floor:this.interview_floor,interview_office:this.interview_office,type:this.$route.query.type,staff_id:localStorage.getItem("id"),department:this.department};1==this.$route.query.type?""==this.interview_unit?this.showtitle("请输入拜访单位"):""==this.formDate?this.showtitle("请输入拜访时间"):""==this.interview_realname?this.showtitle("请输入被访人姓名"):""==this.interview_mobile?this.showtitle("请输入被访人电话"):/^1[3456789]\d{9}$/.test(this.interview_mobile)?""==this.realname?this.showtitle("请输入访客姓名"):""==this.mobile?this.showtitle("请输入访客电话"):/^1[3456789]\d{9}$/.test(this.mobile)?""==this.id_card?this.showtitle("请输入身份证号码"):""==this.reason?this.showtitle("请输入拜访理由"):this.$post("/api/client/guest",i,e).then((function(e){1==e.code?t.showtitle(e.msg).then((function(e){t.$router.push({path:"/visit"})})):t.showtitle(e.msg)})):this.showtitle("访客电话格式不对"):this.showtitle("被访人电话格式不对"):""==this.interview_unit?this.showtitle("请输入拜访单位"):""==this.formDate?this.showtitle("请输入拜访时间"):""==this.interview_realname?this.showtitle("请输入被访人姓名"):""==this.interview_mobile?this.showtitle("请输入被访人电话"):/^1[3456789]\d{9}$/.test(this.interview_mobile)?""==this.realname?this.showtitle("请输入访客姓名"):this.$post("/api/client/guest",i,e).then((function(e){1==e.code?(localStorage.setItem("gude_show",1),t.showtitle("填写成功，请转发给其他用户").then(t.$router.push({path:"/appointmented",query:{id:e.data}}))):t.showtitle(e.msg)})):this.showtitle("被访人电话格式不对")}}},l=r,c=(i("1c1d"),i("2877")),u=Object(c["a"])(l,n,a,!1,null,"9272fd18",null);e["default"]=u.exports},"785d":function(t,e,i){},b9a2:function(t,e,i){"use strict";i("785d")},df9f:function(t,e,i){}}]);
//# sourceMappingURL=chunk-2633338c.20e8ad3c.js.map